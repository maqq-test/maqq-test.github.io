(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["MyNFT"],{"350c":function(e,t,o){e.exports=o.p+"static/img/new.89d32a3d.png"},"48b1":function(e,t,o){"use strict";o("5efc")},"5efc":function(e,t,o){},"885e":function(e,t,o){"use strict";o.r(t);var c=o("7a23");const i=e=>(Object(c["pushScopeId"])("data-v-303479b6"),e=e(),Object(c["popScopeId"])(),e),n={class:"details"},l={class:"flex-start"},s={class:"ml-3"},a={class:"bgWhite padding-l-r-15",style:{"margin-bottom":"90px"}},r={class:"baseInfo"},d={class:"price"},p=i(()=>Object(c["createElementVNode"])("span",{class:"ml-3"},"BTC",-1)),b={class:"sub"},h={class:"ml-3 font-12 color-999 iconfont icon-copy"},m={class:"relative padding-l-r-14 item mt-20"},O={class:"grid-box"},f=["onClick"],j={key:0,class:"pending"},u={class:"relative"},g={key:0,class:"project"},v={class:"ellipsis block flex-1 color-999"},N={class:"ellipsis block flex-1 mt-5"},w={class:"swap"},k={class:"text-center"},y={class:"font-16 color-333 block"},I={key:1},V={class:"text-center"},C={class:"font-16 color-333 block"},x={class:"font-15 color-333 mt-15 tl line-height-22"},$={class:"flex-between bottom"},D=["loading"];function E(e,t,i,E,T,F){var _,S,B;const U=Object(c["resolveComponent"])("van-icon"),L=Object(c["resolveComponent"])("van-image"),z=Object(c["resolveComponent"])("van-nav-bar"),P=Object(c["resolveComponent"])("van-sticky"),A=Object(c["resolveComponent"])("van-col"),M=Object(c["resolveComponent"])("van-row"),q=Object(c["resolveComponent"])("van-empty"),J=Object(c["resolveComponent"])("van-tab"),R=Object(c["resolveComponent"])("van-tabs"),W=Object(c["resolveComponent"])("van-button"),G=Object(c["resolveComponent"])("router-link"),H=Object(c["resolveComponent"])("van-popup"),K=Object(c["resolveDirective"])("copy");return Object(c["openBlock"])(),Object(c["createElementBlock"])("section",n,[Object(c["createVNode"])(P,null,{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(z,{class:"nav","safe-area-inset-top":"",border:""},{left:Object(c["withCtx"])(()=>[Object(c["createVNode"])(U,{class:"van-nav-icon",name:"arrow-left",size:"18",onClick:t[0]||(t[0]=Object(c["withModifiers"])(t=>e.$f.back(),["stop"]))})]),title:Object(c["withCtx"])(()=>{var t,i;return[Object(c["createElementVNode"])("div",l,[Object(c["createVNode"])(L,{class:"img-wrap",style:{background:"#fff"},fit:"contain",width:"24px",height:"24px",radius:"24px",src:e.$f.formatImage(null===(t=T.nftInfo)||void 0===t?void 0:t.icon,o("350c")),"error-icon":o("350c"),"loading-icon":o("350c"),"icon-size":"24px"},null,8,["src","error-icon","loading-icon"]),Object(c["createElementVNode"])("span",s,Object(c["toDisplayString"])(null===(i=T.nftInfo)||void 0===i?void 0:i.name),1)])]}),_:1})]),_:1}),Object(c["createElementVNode"])("div",a,[Object(c["createElementVNode"])("div",r,[Object(c["createElementVNode"])("span",d,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$f.formatNumber2(null===(_=T.nftInfo)||void 0===_?void 0:_.floorPrice))+" ",1),p]),Object(c["createElementVNode"])("span",b,[Object(c["createTextVNode"])(" collectionId: "+Object(c["toDisplayString"])(((null===(S=T.nftInfo)||void 0===S?void 0:S.collectionId)||"").replace(new RegExp("(^.{4})(.+)(.{4}$)"),"$1...$3"))+" ",1),Object(c["withDirectives"])(Object(c["createElementVNode"])("i",h,null,512),[[K,(null===(B=T.nftInfo)||void 0===B?void 0:B.collectionId)||""]])])]),Object(c["createVNode"])(R,{active:T.active,"onUpdate:active":t[1]||(t[1]=e=>T.active=e),background:"#fff",color:"#3F80F7",shrink:"",border:"","line-width":"20px","title-inactive-color":"#999"},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(J,{title:e.$t("holdersNFT"),name:1},{default:Object(c["withCtx"])(()=>{var t;return[Object(c["createElementVNode"])("div",m,[Object(c["createElementVNode"])("div",O,[null!==(t=T.collectionsList)&&void 0!==t&&t.length?(Object(c["openBlock"])(),Object(c["createBlock"])(M,{key:0,gutter:10},{default:Object(c["withCtx"])(()=>[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(T.collectionsList,(t,i)=>(Object(c["openBlock"])(),Object(c["createBlock"])(A,{span:T.column,key:i},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",{class:"card mb-10 relative",onClick:e=>F.jumpDetails(t)},[t.listed?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,Object(c["toDisplayString"])(e.$t("listed")),1)):Object(c["createCommentVNode"])("",!0),Object(c["createElementVNode"])("div",u,[t.collectionItemName?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",g,Object(c["toDisplayString"])(t.collectionItemName),1)):Object(c["createCommentVNode"])("",!0),Object(c["createVNode"])(L,{style:{width:"100%",background:"#f9f9fc"},height:"168",fit:"contain","lazy-load":"",src:e.$f.formatImage(t.inscriptionId,o("350c")),"error-icon":o("350c"),"loading-icon":o("350c"),"icon-size":"168px"},null,8,["src","error-icon","loading-icon"])]),Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["bottom",{"flex-between-end":24==T.column}])},[Object(c["createElementVNode"])("div",null,[Object(c["createElementVNode"])("span",v,Object(c["toDisplayString"])(t.collectionItemName),1),Object(c["createElementVNode"])("span",N," #"+Object(c["toDisplayString"])(t.inscriptionNumber),1)])],2)],8,f)]),_:2},1032,["span"]))),128))]),_:1})):(Object(c["openBlock"])(),Object(c["createBlock"])(q,{key:1,description:e.$t("empty")},null,8,["description"]))])])]}),_:1},8,["title"]),Object(c["createVNode"])(J,{title:e.$t("transfer"),name:2},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(q,{description:e.$t("empty")},null,8,["description"])]),_:1},8,["title"]),Object(c["createVNode"])(J,{title:e.$t("trade"),name:4},{default:Object(c["withCtx"])(()=>[Object(c["createVNode"])(q,{description:e.$t("empty")},null,8,["description"])]),_:1},8,["title"])]),_:1},8,["active"])]),Object(c["createElementVNode"])("div",w,[Object(c["createVNode"])(W,{type:"primary",round:"",block:"",color:"#3F80F7",onClick:F.jumpSwap,style:{height:"40px",width:"100%"}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("trade")),1)]),_:1},8,["onClick"])]),Object(c["createVNode"])(H,{show:T.pop,"onUpdate:show":t[3]||(t[3]=e=>T.pop=e),style:{padding:"24px",width:"90%"},round:"",closeable:""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",k,[Object(c["createElementVNode"])("span",y,Object(c["toDisplayString"])(e.$t("nextToDo")),1),T.form.listed?(Object(c["openBlock"])(),Object(c["createBlock"])(W,{key:0,style:{width:"100%","margin-top":"40px",height:"35px"},type:"primary",round:"",block:"",color:"#3F80F7",onClick:t[2]||(t[2]=e=>T.showDown=!0)},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("drop"))+" NFT ",1)]),_:1})):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",I,[Object(c["createVNode"])(W,{style:{width:"100%","margin-top":"40px",height:"35px"},type:"primary",round:"",block:"",color:"#3F80F7",onClick:F.up},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("list"))+" NFT ",1)]),_:1},8,["onClick"])])),Object(c["createVNode"])(G,{class:"link",to:{path:"/detailsItem",query:{inscriptionId:T.form.inscriptionId}}},{default:Object(c["withCtx"])(()=>[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.$t("viewNFT")),1)]),_:1},8,["to"])])]),_:1},8,["show"]),Object(c["createVNode"])(H,{show:T.showDown,"onUpdate:show":t[6]||(t[6]=e=>T.showDown=e),style:{padding:"24px",width:"90%"},round:"",closeable:""},{default:Object(c["withCtx"])(()=>[Object(c["createElementVNode"])("div",V,[Object(c["createElementVNode"])("span",C,Object(c["toDisplayString"])(e.$t("dropTitle")),1),Object(c["createElementVNode"])("div",x,Object(c["toDisplayString"])(e.$t("dropDescription")),1),Object(c["createElementVNode"])("div",$,[Object(c["createElementVNode"])("a",{class:"link color-333",onClick:t[4]||(t[4]=Object(c["withModifiers"])(e=>T.showDown=!1,["stop","prevent"]))},Object(c["toDisplayString"])(e.$t("thinkAgain")),1),Object(c["createElementVNode"])("a",{class:"link",onClick:t[5]||(t[5]=Object(c["withModifiers"])((...e)=>F.putOff&&F.putOff(...e),["stop","prevent"])),loading:T.loadingCancel},Object(c["toDisplayString"])(e.$t("confirm")),9,D)])])]),_:1},8,["show"])])}var T=o("365c"),F={data(){return{active:1,collectionsList:[],column:12,loading:!1,pop:!1,form:{},showDown:!1,loadingCancel:!1,pageNO:1,pageSize:10,finished:!1,error:!1,nftInfo:{}}},computed:{currentAccount(){return this.$store.state.currentAccount},netId(){return this.$store.getters.netId}},watch:{active(e){"1"==e?(this.hotList=[],this.getUserNFTItems()):this.hotList=[]},$route(e,t){"Up"!==t.name&&"Transfer"!==t.name||(this.getNftDetail(),this.hotList=[],this.getUserNFTItems())},currentAccount(){this.hotList=[],this.getUserNFTItems()},netId(){this.hotList=[],this.getUserNFTItems()}},mounted(){this.getNftDetail(),this.getUserNFTItems()},methods:{getNftDetail(){Object(T["y"])({collectionId:this.$route.params.collectionId}).then(e=>{this.nftInfo=e,this.nftInfo.floorPrice=(null===e||void 0===e?void 0:e.floorPrice)/1e8,this.nftInfo.btcValue=(null===e||void 0===e?void 0:e.btcValue)/1e8,console.log("------this.nftInfo--------",this.nftInfo)})},getUserNFTItems(){this.loading=!0;let e={page:1,page_size:20,collectionId:this.$route.params.collectionId,address:this.$store.state.currentAccount};Object(T["L"])(e).then(e=>{this.collectionsList=null===e||void 0===e?void 0:e.data,console.log("----------getUserNFTItems------------",e)}).catch(e=>{this.error=!0,console.log(e)}).finally(()=>{this.loading=!1})},jumpSwap(){this.$router.push({name:"Details",params:{collectionId:this.nftInfo.collectionId}})},jumpDetails(e){this.pop=!0,this.form=e,this.getItemsDetails(null===e||void 0===e?void 0:e.inscriptionId)},getItemsDetails(e){Object(T["t"])({inscriptionId:e}).then(e=>{this.form={...this.form,auctionId:null===e||void 0===e?void 0:e.auctionId}})},up(){this.$router.push({path:"/up",query:{inscriptionId:this.form.inscriptionId}}),this.pop=!1},transfer(){this.$router.push({path:"/nftMarket/transfer",query:{token:this.form.token,token_id:this.form.token_id,chain:this.form.chain}}),this.pop=!1},putOff(){let e={auctionId:this.form.auctionId};this.loadingUp=!0,Object(T["P"])(e).then(e=>{var t;null===(t=window.unisat)||void 0===t||t.signPsbt(e.psbt,{autoFinalized:!1}).then(e=>{const t={auctionId:this.form.auctionId,psbt:e,fromBase64:!1};this.confirmPutOff(t)}).catch(e=>{this.loadingCancel=!1,console.log("----------signPsbt----catch--------","reject")})}).catch(e=>{this.loadingCancel=!1,this.$notify({type:"danger",message:e})}).finally(()=>{})},confirmPutOff(e){Object(T["g"])(e).then(e=>{this.pop=!1,this.showDown=!1,this.$notify({type:"success",message:"已下架"}),this.hotList=[],this.getUserNFTItems()}).catch(e=>{this.loadingCancel=!1,console.log("-------confirmputOff--------",e),this.$notify({type:"danger",message:e})}).finally(()=>{this.loadingCancel=!1})},cancelOrder(){const e=this.form.order_id;this.loadingCancel=!0;let t=this.$toast.loading({message:"下架中...",forbidClick:!0,duration:0});console.log("------cancelOrder----,",this.form.market_contract,e),Object(T["d"])(this.form.market_contract,e).then(e=>(console.log("res",e),e.wait())).then(async e=>{setTimeout(()=>{this.pop=!1,this.showDown=!1,this.$notify({type:"success",message:"已下架"}),this.hotList=[],this.getUserNFTItems()},1e4)}).catch(e=>{this.$f.handleError(e),console.log("err==cancelOrder",e)}).finally(()=>{setTimeout(()=>{this.loadingCancel=!1,t.clear()},1e4)})}}},_=(o("48b1"),o("6b0d")),S=o.n(_);const B=S()(F,[["render",E],["__scopeId","data-v-303479b6"]]);t["default"]=B}}]);